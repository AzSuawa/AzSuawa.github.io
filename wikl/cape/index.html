<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>上传皮肤到服务器 - 素素の生存服(p≧w≦q)</title><meta name="description" content="上传皮肤到服务器 - 素素の生存服、azsu.top、小小素QQ机器人"><meta name="theme-color" content="#A1BDFF"><link rel="stylesheet" href="/css/all.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="icon" href="/images/favicon.ico"><style>.skin-upload-container{max-width:500px;margin:0 auto}.skin-drop-area{border:2px dashed #6c757d;border-radius:6px;padding:30px;text-align:center;margin-bottom:20px;transition:all .3s;background:#f8f9fa}.skin-drop-area.highlight{border-color:#28a745;background:#e8f5e9}.skin-btn{background:var(--primary-color);color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:16px;margin:10px 5px;transition:background-color .3s}.skin-btn:hover{background:#8CAEFF}.skin-progress-container{margin-top:20px;display:none}.skin-progress{width:100%;height:20px;border-radius:4px}.skin-file-list{margin-top:20px;max-height:300px;overflow-y:auto}.skin-file-item{display:flex;justify-content:space-between;padding:10px;border-bottom:1px solid #eee;align-items:center}.skin-file-info{display:flex;align-items:center}.skin-file-icon{margin-right:10px;color:#6c757d}.skin-file-status{font-weight:700}.skin-status-pending{color:#ffc107}.skin-status-success{color:#28a745}.skin-status-error{color:#dc3545}.skin-form-group{margin-bottom:15px}.skin-form-group label{display:block;margin-bottom:5px;font-weight:700}.skin-form-group input{width:calc(100% - 2px);padding:10px;border:1px solid #ced4da;border-radius:4px;font-size:14px;box-sizing:border-box}.skin-file-size-limit{color:#6c757d;font-size:14px;margin-top:5px}.skin-preview-link{color:#007bff;text-decoration:none;margin-left:10px}.skin-preview-link:hover{text-decoration:underline}#fileInput{display:none}.captcha-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);display:none;z-index:999}.captcha-card{background:var(--card-bg);border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,.15);width:100%;max-width:380px;overflow:hidden;display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000}.captcha-card-header{padding:16px 20px;border-bottom:1px solid var(--border-color);position:relative}.captcha-card-title{font-size:18px;font-weight:700;margin:0 0 6px 0;color:var(--text-color)}.captcha-cueword{font-weight:700;color:var(--primary-color)}.captcha-verification-container{padding:8px 16px 8px}.captcha-image-wrapper{width:100%;margin:8px 0 12px;position:relative}.captcha-image-container{position:relative;width:100%;padding-top:100%;overflow:hidden;border:2px solid var(--border-color);border-radius:4px;background:#f9f9f9}.captcha-image-container img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.captcha-grid-overlay{position:absolute;top:0;left:0;width:100%;height:100%;display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(4,1fr)}.captcha-grid-cell{border:2px solid rgba(0,0,0,.3);transition:all .2s;cursor:pointer;box-sizing:border-box}.captcha-grid-cell:hover{background:var(--hover-bg)}.captcha-grid-cell.selected{background:rgba(161,189,255,.4);border-color:var(--primary-color)}.captcha-card-footer{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;border-top:1px solid var(--border-color)}.captcha-footer-text{font-size:14px;color:#999}.captcha-btn{background:var(--primary-color);color:#fff;border:none;border-radius:4px;padding:6px 14px;font-size:14px;cursor:pointer;transition:background-color .2s}.captcha-btn:hover{background:var(--hover-blue)}.captcha-btn:disabled{background:#ccc;cursor:not-allowed}.captcha-btn-cancel{background:#f1f1f1;color:#666;margin-right:8px}.captcha-btn-cancel:hover{background:#e5e5e5}.captcha-loading{opacity:.6;pointer-events:none}.captcha-success-message,.captcha-error-message{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.7);color:#fff;padding:16px 24px;border-radius:4px;font-weight:700;display:none;z-index:1001}.captcha-error-message{max-width:300px;text-align:center}.captcha-close-btn{position:absolute;top:12px;right:12px;background:0 0;border:none;font-size:20px;cursor:pointer;color:#999}.captcha-close-btn:hover{color:#333}.card{display:block!important}</style></head><body><div id="header"><button id="menu-btn"><i class="fas fa-bars"></i></button><div id="title">素素の生存服</div></div><div id="sidebar"></div><div id="content"><div class="card active"><h1>上传皮肤到服务器</h1><div class="command-section skin-upload-container"><div class="skin-form-group"><label for="playerId">玩家ID:</label><input type="text" id="playerId" placeholder="请输入你的游戏名" required></div><div class="skin-drop-area" id="dropArea"><p>可拖放文件到此处</p><button class="skin-btn" id="selectBtn">选择文件</button> <input type="file" id="fileInput" accept="image/png"><div class="skin-file-size-limit">仅支持原版皮肤(PNG,64×64)</div></div><div class="skin-progress-container" id="progressContainer"><p id="statusText">准备上传...</p><progress class="skin-progress" id="uploadProgress" value="0" max="100"></progress></div><div class="skin-file-list" id="fileList"></div></div></div></div><div class="captcha-overlay" id="captchaOverlay"></div><div class="captcha-card" id="captchaCard"><div class="captcha-card-header"><h2 class="captcha-card-title">请选择所有包含<span id="cueword" class="captcha-cueword">加载中</span>的内容</h2><button class="captcha-close-btn" id="captchaCloseBtn">×</button></div><div class="captcha-verification-container"><div class="captcha-image-wrapper"><div class="captcha-image-container"><img id="captchaImage" alt="验证图片" style="display:none"><div class="captcha-grid-overlay" id="captchaGridOverlay"></div><div id="captchaCenterMessage">正在初始化...</div></div></div></div><div class="captcha-card-footer"><span class="captcha-footer-text">By 阿素本素</span><div><button class="captcha-btn captcha-btn-cancel" id="captchaCancelBtn">取消</button> <button class="captcha-btn" id="captchaSubmitBtn" disabled="disabled">继续</button></div></div></div><div class="captcha-success-message" id="captchaSuccessMessage">验证成功！</div><div class="captcha-error-message" id="captchaErrorMessage"><div id="captchaErrorText"></div></div><script src="/js/main.js"></script><script>// 皮肤上传功能
        const dropArea = document.getElementById('dropArea');
        const fileInput = document.getElementById('fileInput');
        const selectBtn = document.getElementById('selectBtn');
        const progressContainer = document.getElementById('progressContainer');
        const uploadProgress = document.getElementById('uploadProgress');
        const statusText = document.getElementById('statusText');
        const fileList = document.getElementById('fileList');
        const playerIdInput = document.getElementById('playerId');
        
        // 验证码相关变量
        const captchaOverlay = document.getElementById('captchaOverlay');
        const captchaCard = document.getElementById('captchaCard');
        const captchaGridOverlay = document.getElementById('captchaGridOverlay');
        const captchaSubmitBtn = document.getElementById('captchaSubmitBtn');
        const captchaCancelBtn = document.getElementById('captchaCancelBtn');
        const captchaCloseBtn = document.getElementById('captchaCloseBtn');
        const captchaImage = document.getElementById('captchaImage');
        const cuewordElement = document.getElementById('cueword');
        const captchaCenterMessage = document.getElementById('captchaCenterMessage');
        const captchaSuccessMessage = document.getElementById('captchaSuccessMessage');
        const captchaErrorMessage = document.getElementById('captchaErrorMessage');
        const captchaErrorText = document.getElementById('captchaErrorText');
        
        let selectedCells = [];
        let currentToken = '';
        let verificationInProgress = false;
        let pendingFiles = null;
        let pendingPlayerId = '';
        
        // 创建4x4网格
        for (let i = 0; i < 16; i++) {
            const cell = document.createElement('div');
            cell.className = 'captcha-grid-cell';
            cell.dataset.index = i;
            
            cell.addEventListener('click', function() {
                if (verificationInProgress) return;
                
                this.classList.toggle('selected');
                
                const index = parseInt(this.dataset.index);
                if (this.classList.contains('selected')) {
                    if (!selectedCells.includes(index)) {
                        selectedCells.push(index);
                    }
                } else {
                    selectedCells = selectedCells.filter(item => item !== index);
                }
                
                captchaSubmitBtn.disabled = selectedCells.length === 0;
            });
            
            captchaGridOverlay.appendChild(cell);
        }

        // 文件选择器事件绑定
        selectBtn.addEventListener('click', () => {
            fileInput.click();
        });
        
        fileInput.addEventListener('change', () => {
            handleFiles(fileInput.files);
        });

        // 拖放功能
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });
        
        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }
        
        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, () => dropArea.classList.add('highlight'), false);
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, () => dropArea.classList.remove('highlight'), false);
        });
        
        dropArea.addEventListener('drop', handleDrop, false);
        
        function handleDrop(e) {
    